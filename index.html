<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Социален компас</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden { display: none; }
        body { background-color: #f8f8f8; }
    </style>
</head>
<body class="p-5 font-sans text-green-800">
    <div class="max-w-md mx-auto bg-white p-6 rounded-xl shadow-2xl border-t-4 border-green-500">
        
        <div id="motto-display" class="text-center italic font-bold mb-6 min-h-[4rem] text-green-700 flex items-center justify-center text-lg">
            "Зареди се с търпение."
        </div>

        <hr class="mb-6 opacity-20">

        <div class="text-center mb-6">
            <h2 class="text-xs uppercase tracking-widest text-gray-400 font-bold mb-2">Крузо аларм</h2>
            <div id="timer" class="text-6xl font-mono font-black mb-4 text-black">50:00</div>
            
            <div id="stats" class="grid grid-cols-2 gap-2 text-sm font-bold bg-gray-50 p-3 rounded-lg mb-4">
                <div class="text-red-600 border-r border-gray-200">Кортизол: <span id="cortisol">0</span></div>
                <div class="text-blue-600">Ендорфини: <span id="endorphins">0</span></div>
            </div>

            <button id="start-btn" onclick="startApp()" class="bg-green-600 hover:bg-green-700 text-white px-10 py-4 rounded-full font-bold text-xl transition-all shadow-lg active:scale-95">
                СТАРТ
            </button>
        </div>

        <div id="mission-panel" class="hidden border-t-2 border-dashed border-red-200 pt-6 animate-bounce">
            <h3 class="text-xl font-black mb-2 text-red-600 text-center uppercase">SURVIVAL MISSION</h3>
            <div id="mission-text" class="bg-red-50 p-4 rounded-lg text-center font-medium text-gray-800 mb-4 border border-red-100"></div>
            <button onclick="completeMission()" class="bg-blue-600 text-white w-full py-4 rounded-xl font-bold shadow-md hover:bg-blue-700 mb-2">ИЗПЪЛНИХ МИСИЯТА</button>
            <button onclick="showEthicalFilter()" class="text-gray-400 text-sm w-full py-2 hover:underline">Отказвам (Етичен филтър)</button>
        </div>

        <div id="ethical-filter" class="hidden border-t pt-4 mt-4">
            <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                <h3 class="font-bold text-yellow-800 mb-3 text-center">Етичен въпрос:</h3>
                <p class="text-sm mb-4 text-center">Балансирате ли правилно дигиталното и реалното време?</p>
                <div class="flex gap-2">
                    <button onclick="checkEthics(true)" class="bg-white border border-yellow-400 text-yellow-800 flex-1 py-2 rounded font-bold">ДА</button>
                    <button onclick="checkEthics(false)" class="bg-white border border-yellow-400 text-yellow-800 flex-1 py-2 rounded font-bold">НЕ</button>
                </div>
            </div>
        </div>

        <div id="crisis-panel" class="hidden mt-4 p-4 bg-red-600 text-white rounded-lg text-center animate-pulse">
            <h3 class="font-black text-lg">КРИЗИСЕН КОНТАКТ</h3>
            <p class="font-bold">Тел: 116 111</p>
        </div>
    </div>

    <script>
        // ДАННИ ОТ ЗАДАНИЕТО
        const mottos = [
            "Говори с хора, а не с телефона.",
            "Движението е лекът на живота.",
            "Режимът е твоята крепост.",
            "Петкан намери надежда, ти намери баланс.",
            "Всяка почивка е стъпка към успеха."
        ];
        
        const missions = [
            { name: "Клекове", desc: "Направи 10 клякания сега!" },
            { name: "Разтягане", desc: "Протегни ръце към тавана за 20 сек." },
            { name: "Планк", desc: "Задръж планк за 30 секунди." },
            { name: "Очи", desc: "Погледни през прозореца надалеч за 1 мин." }
        ];

        let timerSeconds = 50 * 60; // 50 МИНУТИ ЗА ТЕСТ
        let cortisol = 0;
        let endorphins = 0;
        let interval;
        let mIdx = 0;

        // РОТАЦИЯ НА МОТОТА
        function rotateMotto() {
            document.getElementById('motto-display').innerText = `"${mottos[mIdx]}"`;
            mIdx = (mIdx + 1) % mottos.length;
        }
        setInterval(rotateMotto, 5000);
        rotateMotto();

        // СТАРТИРАНЕ
        function startApp() {
            // СКРИВА БУТОНА
            document.getElementById('start-btn').classList.add('hidden');
            
            interval = setInterval(() => {
                timerSeconds--;
                updateDisplay();
                
                // Увеличаване на кортизола
                if (timerSeconds % 300 === 0 && timerSeconds > 0) {
                    cortisol += 5;
                    updateStats();
                }

                if (timerSeconds <= 0) {
                    clearInterval(interval);
                    showMission();
                }
            }, 1000);
        }

        function updateDisplay() {
            const m = Math.floor(timerSeconds / 60);
            const s = timerSeconds % 60;
            document.getElementById('timer').innerText = `${m}:${s < 10 ? '0' : ''}${s}`;
        }

        function updateStats() {
            document.getElementById('cortisol').innerText = cortisol;
            document.getElementById('endorphins').innerText = endorphins;
        }

        // МИСИЯ
        function showMission() {
            const mission = missions[Math.floor(Math.random() * missions.length)];
            document.getElementById('mission-text').innerText = `${mission.name}: ${mission.desc}`;
            document.getElementById('mission-panel').classList.remove('hidden');
        }

        function completeMission() {
            cortisol -= 15; //
            endorphins += 20; //
            updateStats();
            alert("Кортизолът е намален! Ендорфините са увеличени!");
            location.reload(); // Рестартира за нов цикъл
        }

        function showEthicalFilter() {
            document.getElementById('ethical-filter').classList.remove('hidden');
        }

        function checkEthics(answer) {
            if (!answer) {
                document.getElementById('crisis-panel').classList.remove('hidden');
            } else {
                alert("Опитай се да намериш време за упражнение по-късно!");
                location.reload();
            }
        }
    </script>
</body>
</html>
