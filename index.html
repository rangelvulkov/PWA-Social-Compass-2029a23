<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ—Ü–∏–∞–ª–µ–Ω –ö–æ–º–ø–∞—Å - –ì—Ä—É–ø–∞ 1, 9–∞</title>
    <link rel="manifest" href="manifest.webmanifest">
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --green: #22c55e; --red: #ef4444; --amber: #f59e0b; --blue: #3b82f6; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; padding: 20px; }
        
        /* –°–µ–∫—Ü–∏—è I: –î–∏–Ω–∞–º–∏—á–Ω–æ –ú–æ—Ç–æ  */
        .motto-container { background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; margin-bottom: 20px; text-align: center; max-width: 600px; border-left: 4px solid var(--blue); }
        #motto-text { font-style: italic; font-size: 18px; color: #cbd5e1; }

        .main-card { background: var(--card); padding: 40px; border-radius: 30px; text-align: center; width: 100%; max-width: 500px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        #timer { font-size: 90px; font-weight: 900; color: var(--green); margin: 20px 0; font-family: monospace; }
        
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 25px 0; }
        .stat-box { background: rgba(0,0,0,0.2); padding: 15px; border-radius: 15px; }
        .stat-label { font-size: 12px; color: #94a3b8; text-transform: uppercase; display: block; }
        .stat-num { font-size: 28px; font-weight: bold; }

        .controls { display: flex; gap: 15px; justify-content: center; }
        .btn { padding: 18px 35px; font-size: 18px; font-weight: bold; border-radius: 15px; border: none; cursor: pointer; transition: 0.3s; }
        .btn-start { background: var(--green); color: white; width: 100%; }
        .btn-stop { background: var(--red); color: white; }
        
        /* –ó–∞–¥–∞—á–∞ –Ω–∞ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω–∏—è –¥–∏–∑–∞–π–Ω–µ—Ä */
        #installBtn { background: var(--amber); color: black; padding: 12px 25px; border-radius: 50px; font-weight: bold; margin-bottom: 20px; display: none; border: none; cursor: pointer; }

        /* –ú–æ–¥–∞–ª–∏ –∑–∞ –ï—Ç–∏—á–µ–Ω —Ñ–∏–ª—Ç—ä—Ä –∏ –ú–∏—Å–∏–∏ [cite: 19, 21] */
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); justify-content: center; align-items: center; z-index: 1000; padding: 20px; }
        .modal-content { background: var(--card); padding: 30px; border-radius: 25px; width: 100%; max-width: 450px; }
        .q-box { margin-bottom: 20px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px; }
        .crisis-box { background: #450a0a; border: 1px solid var(--red); padding: 20px; border-radius: 15px; margin-top: 20px; display: none; }
    </style>
</head>
<body>
<button id="installBtn" style="display:none; background: #f59e0b; color: white; padding: 15px; border-radius: 10px; cursor: pointer; border: none; font-weight: bold; margin-bottom: 20px;">
    üì• –ò–ù–°–¢–ê–õ–ò–†–ê–ô –ü–†–ò–õ–û–ñ–ï–ù–ò–ï–¢–û
</button>
    <div class="motto-container">
        <div id="motto-text">"–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –¥–Ω–µ–≤–Ω–æ—Ç–æ –º–æ—Ç–æ..."</div>
    </div>

    <div class="main-card">
        <div style="color: var(--blue); font-weight: bold; letter-spacing: 2px; font-size: 12px;">–ö–†–£–ó–û –ê–õ–ê–†–ú - –ì–†–£–ü–ê 1</div>
        <div id="timer">50:00</div> <div class="stats-grid">
            <div class="stat-box">
                <span class="stat-label">–ö–æ—Ä—Ç–∏–∑–æ–ª</span>
                <span id="cort-display" class="stat-num" style="color: var(--red);">0</span>
            </div>
            <div class="stat-box">
                <span class="stat-label">–ï–Ω–¥–æ—Ä—Ñ–∏–Ω–∏</span>
                <span id="endo-display" class="stat-num" style="color: var(--blue);">0</span>
            </div>
        </div>

        <div class="controls">
            <button id="mainBtn" class="btn btn-start" onclick="toggleTimer()">–°–¢–ê–†–¢</button>
            <button class="btn btn-stop" onclick="resetTimer()">–°–¢–û–ü</button>
        </div>
    </div>

    <div id="ethicsModal" class="modal">
        <div class="modal-content">
            <h2 style="color: var(--amber);">üö® –ï—Ç–∏—á–µ–Ω —Ñ–∏–ª—Ç—ä—Ä</h2>
            <p style="color: #94a3b8; font-size: 14px; margin-bottom: 20px;">–û—Ü–µ–Ω–∫–∞ –Ω–∞ —Ä–∏—Å–∫–∞ –æ—Ç AI –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç (–ö–∞–∑—É—Å –ê–¥–∞–º –†–µ–π–Ω)</p>
            
            <div id="q1" class="q-box">
                <p>1. –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç–µ –ª–∏ –¥–∞ —Ç—ä—Ä—Å–∏—Ç–µ –ø–æ–¥–∫—Ä–µ–ø–∞ –æ—Ç AI, –≤–º–µ—Å—Ç–æ –æ—Ç —Ö–æ—Ä–∞? [cite: 22]</p>
                <button onclick="recordAnswer(1, true)">–î–ê</button> <button onclick="recordAnswer(1, false)">–ù–ï</button>
            </div>
            <div id="q2" class="q-box" style="display:none;">
                <p>2. –ß—Ä–µ–∑ AI –º–æ–∂–µ–º –ª–∏ –¥–∞ –∏–∑–±—è–≥–∞–º–µ –æ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ç–µ —Å–∏ –ø—Ä–æ–±–ª–µ–º–∏? [cite: 22]</p>
                <button onclick="recordAnswer(2, true)">–î–ê</button> <button onclick="recordAnswer(2, false)">–ù–ï</button>
            </div>
            <div id="q3" class="q-box" style="display:none;">
                <p>3. –ü—Ä–µ–Ω–µ–±—Ä–µ–≥–≤–∞—Ç–µ –ª–∏ –æ—Å–Ω–æ–≤–Ω–∏—Ç–µ —Å–∏ –Ω—É–∂–¥–∏ –∑–∞—Ä–∞–¥–∏ –µ–∫—Ä–∞–Ω–∞? [cite: 22]</p>
                <button onclick="recordAnswer(3, true)">–î–ê</button> <button onclick="recordAnswer(3, false)">–ù–ï</button>
            </div>
        </div>
    </div>

    <div id="resultModal" class="modal">
        <div class="modal-content" style="text-align: center;">
            <h3 id="resHeader">–°–ï–°–ò–Ø–¢–ê –ü–†–ò–ö–õ–Æ–ß–ò</h3>
            <div id="missionDisplay" style="margin: 20px 0;">
                <h2 id="mTitle" style="color: var(--green);"></h2>
                <p id="mDesc" style="font-size: 18px;"></p>
            </div>

            <div id="crisisPanel" class="crisis-box">
                <h4 style="margin:0 0 10px 0;">üÜò –ö–†–ò–ó–ò–°–ù–ê –ü–û–î–ö–†–ï–ü–ê</h4>
                <p>–ù–∞—Ü–∏–æ–Ω–∞–ª–Ω–∞ –ª–∏–Ω–∏—è: <b>116 111</b> [cite: 26]</p>
                <p>–î–æ–º–∞—à–Ω–æ –Ω–∞—Å–∏–ª–∏–µ: <b>0800 11 977</b> [cite: 28]</p>
            </div>
            
            <button class="btn btn-start" style="margin-top:20px;" onclick="location.reload()">–ù–û–í–ê –°–ï–°–ò–Ø</button>
        </div>
    </div>

    <script>
        // –°–ï–ö–¶–ò–Ø I: –í—Å–∏—á–∫–∏ –º–æ—Ç–æ —Ñ—Ä–∞–∑–∏ –æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ [cite: 8]
        const mottos = [
            "–ú—ä—Ä–∑–µ–ª—ä—Ç –Ω—è–º–∞ –¥–∞ —Ç–µ –¥–æ–≤–µ–¥–µ –¥–æ –Ω–∏–∫—ä–¥–µ.",
            "–°–≤–µ—Ç—ä—Ç –µ –æ—Ç–≤—ä–Ω, –Ω–µ –≤ –µ–∫—Ä–∞–Ω–∞.",
            "–ì–æ–≤–æ—Ä–∏ —Å —Ö–æ—Ä–∞, –∞ –Ω–µ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞.",
            "–î–≤–∏–∂–µ–Ω–∏–µ—Ç–æ –µ –ª–µ–∫—ä—Ç –Ω–∞ –∂–∏–≤–æ—Ç–∞.",
            "–î–æ—Ä–∏ –∏ –Ω–∞–π-–º–∞–ª–∫–∞—Ç–∞ –≤—è—Ä–∞, –º–æ–∂–µ –¥–∞ —Ç–∏ –ø–æ–º–æ–≥–Ω–µ –≤ –Ω–∞–π-—Ç—Ä—É–¥–Ω–∏—Ç–µ —Ç–∏ –¥–Ω–∏."
        ];
        document.getElementById('motto-text').innerText = mottos[Math.floor(Math.random() * mottos.length)];

        // –°–ï–ö–¶–ò–Ø III: –§–í–° –ú–∏—Å–∏–∏ 
        const missions = [
            {n: "–ö–ª–µ–∫–æ–≤–µ", i: "60 –∫–ª–µ–∫–∞ –¥–æ –¥–æ–ª—É —Å –∏–∑–ø—ä–Ω–∞—Ç–∏ —Ä—ä—Ü–µ"},
            {n: "Jumping Jacks", i: "–æ—Ç 30 –∏ 40, –±—ä—Ä–∑–æ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ"},
            {n: "–ë–∞–≤–Ω–æ —Ç–∏—á–∞–Ω–µ", i: "5 –∫–º –¥–∂–æ–≥–∏–Ω–≥"},
            {n: "–ü–ª–∞–Ω–∫", i: "2 –º–∏–Ω. –ø–ª–∞–Ω–∫ –Ω–∞ –ª–∞–∫—Ç–∏, –∏–∑–ø—ä–Ω–∞—Ç–æ —Ç—è–ª–æ"}
        ];

        // –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–ù –î–ò–ó–ê–ô–ù–ï–†: –ò–Ω—Å—Ç–∞–ª–∞—Ü–∏—è
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault(); deferredPrompt = e;
            document.getElementById('installBtn').style.display = 'block';
        });

        document.getElementById('installBtn').addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') document.getElementById('installBtn').style.display = 'none';
                deferredPrompt = null;
            }
        });

        // –õ–û–ì–ò–ö–ê –¢–ê–ô–ú–ï–† (–°–µ–∫—Ü–∏—è II: 50 –º–∏–Ω) 
        let time = 3000; // 50 –º–∏–Ω—É—Ç–∏
        let isRunning = false;
        let timerId = null;
        let yesCount = 0;

        function updateDisplay() {
            let m = Math.floor(time / 60);
            let s = time % 60;
            document.getElementById('timer').innerText = `${m}:${s < 10 ? '0' : ''}${s}`;
        }

        function toggleTimer() {
            const btn = document.getElementById('mainBtn');
            if (!isRunning) {
                isRunning = true; btn.innerText = "–ü–ê–£–ó–ê"; btn.style.background = "#475569";
                timerId = setInterval(() => {
                    if (time > 0) { time--; updateDisplay(); }
                    else { finish(); }
                }, 1000);
            } else {
                isRunning = false; btn.innerText = "–ü–†–û–î–™–õ–ñ–ò"; btn.style.background = "var(--green)";
                clearInterval(timerId);
            }
        }

        function resetTimer() {
            clearInterval(timerId); isRunning = false; time = 3000;
            document.getElementById('mainBtn').innerText = "–°–¢–ê–†–¢";
            document.getElementById('mainBtn').style.background = "var(--green)";
            updateDisplay();
        }

        function finish() {
            clearInterval(timerId);
            document.getElementById('ethicsModal').style.display = 'flex';
        }

        // –°–ï–ö–¶–ò–Ø IV: –ê–ª–≥–æ—Ä–∏—Ç—ä–º –Ω–∞ –ï—Ç–∏—á–Ω–∏—è —Ñ–∏–ª—Ç—ä—Ä [cite: 19, 21, 29]
        function recordAnswer(qNum, isYes) {
            if (isYes) yesCount++;
            document.getElementById('q' + qNum).style.display = 'none';
            if (qNum < 3) {
                document.getElementById('q' + (qNum + 1)).style.display = 'block';
            } else {
                processResults();
            }
        }

        function processResults() {
            document.getElementById('ethicsModal').style.display = 'none';
            document.getElementById('resultModal').style.display = 'flex';
            
            const m = missions[Math.floor(Math.random() * missions.length)];
            document.getElementById('mTitle').innerText = m.n;
            document.getElementById('mDesc').innerText = m.i;

            // IF(–î–∞ >= 2) -> –°–µ–∫—Ü–∏—è II & IV [cite: 12, 21, 29]
            if (yesCount >= 2) {
                document.getElementById('resHeader').innerText = "–í–ò–°–û–ö –†–ò–°–ö (–ü–™–¢–Ø–¢ –ù–ê –ê–î–ê–ú –†–ï–ô–ù)";
                document.getElementById('resHeader').style.color = "var(--red)";
                document.getElementById('crisisPanel').style.display = 'block';
                // –í–≥—Ä–∞–∂–¥–∞–Ω–µ –Ω–∞ STEM —Å—Ç–æ–π–Ω–æ—Å—Ç–∏—Ç–µ 
                document.getElementById('cort-display').innerText = "-5";
                document.getElementById('endo-display').innerText = "+25";
            } else {
                document.getElementById('resHeader').innerText = "–ë–†–ê–í–û! –£–°–ü–ï–®–ù–ê –°–ï–°–ò–Ø";
                document.getElementById('resHeader').style.color = "var(--green)";
            }
        }

        if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }
        updateDisplay();
    let deferredPrompt;
const installBtn = document.getElementById('installBtn');

// –ë—Ä–∞—É–∑—ä—Ä—ä—Ç –ø—Ä–æ–≤–µ—Ä—è–≤–∞ –¥–∞–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –º–æ–∂–µ –¥–∞ —Å–µ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞
window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault(); // –°–ø–∏—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—Ç–æ –∏–∑—Å–∫–∞—á–∞–Ω–µ
    deferredPrompt = e; // –ó–∞–ø–∞–∑–≤–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ
    installBtn.style.display = 'block'; // –ü–æ–∫–∞–∑–≤–∞ —Ç–≤–æ—è –±—É—Ç–æ–Ω/–ª–∏–Ω–∫
});

// –ö–æ–≥–∞—Ç–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –∫–ª–∏–∫–Ω–µ –≤—ä—Ä—Ö—É —Ç–≤–æ—è –ª–∏–Ω–∫
installBtn.addEventListener('click', async () => {
    if (deferredPrompt) {
        deferredPrompt.prompt(); // –ü–æ–∫–∞–∑–≤–∞ —Å–∏—Å—Ç–µ–º–Ω–∏—è –ø—Ä–æ–∑–æ—Ä–µ—Ü –∑–∞ –∏–Ω—Å—Ç–∞–ª–∞—Ü–∏—è
        const { outcome } = await deferredPrompt.userChoice;
        if (outcome === 'accepted') {
            installBtn.style.display = 'none'; // –°–∫—Ä–∏–≤–∞ –±—É—Ç–æ–Ω–∞ –ø—Ä–∏ —É—Å–ø–µ—Ö
        }
        deferredPrompt = null;
    }
});</script>
</body>
</html>
