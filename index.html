<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ—Ü–∏–∞–ª–µ–Ω –ö–æ–º–ø–∞—Å - –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ–Ω –î–∏–∑–∞–π–Ω</title>
    <link rel="manifest" href="manifest.webmanifest">
    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --green: #22c55e;
            --red: #ef4444;
            --amber: #f59e0b;
        }
        body {
            background-color: var(--bg);
            color: white;
            font-family: 'Segoe UI', system-ui, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }
        /* –ë–£–¢–û–ù –ó–ê –ò–ù–°–¢–ê–õ–ò–†–ê–ù–ï - –ì–õ–ê–í–ù–ê –ó–ê–î–ê–ß–ê */
        #installBtn {
            display: none;
            background: var(--amber);
            color: black;
            padding: 15px 30px;
            border-radius: 50px;
            border: none;
            font-weight: bold;
            font-size: 18px;
            cursor: pointer;
            margin-bottom: 30px;
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.4);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .main-card {
            background: var(--card);
            padding: 60px;
            border-radius: 40px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            text-align: center;
            width: 500px;
        }
        .header-text {
            font-size: 14px;
            letter-spacing: 5px;
            color: #94a3b8;
            margin-bottom: 20px;
        }
        #timer {
            font-size: 120px;
            font-weight: 900;
            color: var(--green);
            font-family: monospace;
            margin: 20px 0;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }
        .stat-box {
            background: rgba(0,0,0,0.2);
            padding: 20px;
            border-radius: 20px;
        }
        .stat-label { font-size: 12px; color: #64748b; text-transform: uppercase; }
        .stat-num { font-size: 32px; font-weight: bold; display: block; }
        .controls {
            display: flex;
            gap: 20px;
            justify-content: center;
        }
        .btn {
            padding: 20px 40px;
            font-size: 20px;
            font-weight: bold;
            border-radius: 15px;
            border: none;
            cursor: pointer;
            transition: 0.3s;
            min-width: 150px;
        }
        .btn-start { background: var(--green); color: white; }
        .btn-stop { background: var(--red); color: white; }
        .btn:hover { opacity: 0.9; transform: translateY(-3px); }
    </style>
</head>
<body>

    <button id="installBtn">üì• –ò–ù–°–¢–ê–õ–ò–†–ê–ô –ü–†–ò–õ–û–ñ–ï–ù–ò–ï–¢–û</button>

    <div class="main-card">
        <div class="header-text">–°–û–¶–ò–ê–õ–ï–ù –ö–û–ú–ü–ê–°</div>
        
        <div id="timer">50:00</div>

        <div class="stats-grid">
            <div class="stat-box">
                <span class="stat-label">–ö–æ—Ä—Ç–∏–∑–æ–ª</span>
                <span id="cort" class="stat-num" style="color: var(--red);">0</span>
            </div>
            <div class="stat-box">
                <span class="stat-label">–ï–Ω–¥–æ—Ä—Ñ–∏–Ω–∏</span>
                <span id="endo" class="stat-num" style="color: #3b82f6;">0</span>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-start" id="toggleBtn" onclick="toggleTimer()">–°–¢–ê–†–¢</button>
            <button class="btn btn-stop" onclick="stopTimer()">–°–¢–û–ü</button>
        </div>
    </div>

    <script>
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }

        // –õ–æ–≥–∏–∫–∞ –∑–∞ –±—É—Ç–æ–Ω–∞ –∑–∞ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ
        let deferredPrompt;
        const installBtn = document.getElementById('installBtn');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.style.display = 'block';
        });

        installBtn.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') installBtn.style.display = 'none';
                deferredPrompt = null;
            }
        });

        // –õ–æ–≥–∏–∫–∞ –Ω–∞ —Ç–∞–π–º–µ—Ä–∞
        let time = 3000;
        let isRunning = false;
        let interval = null;

        function updateUI() {
            let m = Math.floor(time / 60);
            let s = time % 60;
            document.getElementById('timer').innerText = `${m}:${s < 10 ? '0' : ''}${s}`;
            
            let passed = 3000 - time;
            document.getElementById('cort').innerText = Math.floor(passed / 60);
            document.getElementById('endo').innerText = Math.floor(passed / 120);
        }

        function toggleTimer() {
            const btn = document.getElementById('toggleBtn');
            if (!isRunning) {
                isRunning = true;
                btn.innerText = "–ü–ê–£–ó–ê";
                btn.style.background = "#475569";
                interval = setInterval(() => {
                    if (time > 1) {
                        time--;
                        updateUI();
                    } else {
                        stopTimer();
                        alert("–í—Ä–µ–º–µ—Ç–æ –∏–∑—Ç–µ—á–µ! –í—Ä–µ–º–µ –µ –∑–∞ —Å–æ—Ü–∏–∞–ª–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ.");
                    }
                }, 1000);
            } else {
                isRunning = false;
                btn.innerText = "–°–¢–ê–†–¢";
                btn.style.background = "#22c55e";
                clearInterval(interval);
            }
        }

        function stopTimer() {
            clearInterval(interval);
            isRunning = false;
            time = 3000;
            updateUI();
            const btn = document.getElementById('toggleBtn');
            btn.innerText = "–°–¢–ê–†–¢";
            btn.style.background = "#22c55e";
        }

        updateUI();
    </script>
</body>
</html>
