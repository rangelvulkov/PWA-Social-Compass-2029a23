<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ—Ü–∏–∞–ª–µ–Ω –∫–æ–º–ø–∞—Å: –ö—Ä—É–∑–æ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" href="manifest.webmanifest">
    <style>
        .progress-ring { transition: stroke-dashoffset 0.35s; transform: rotate(-90deg); transform-origin: 50% 50%; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen flex flex-col items-center p-4 font-sans">

    <div id="motto-box" class="w-full max-w-md bg-green-600 text-white p-4 rounded-2xl shadow-lg mb-6 text-center italic min-h-[80px] flex items-center justify-center">
        "–ó–∞—Ä–µ–∂–¥–∞–º –¥–∏–≥–∏—Ç–∞–ª–µ–Ω –Ω–∞—Ä—ä—á–Ω–∏–∫..."
    </div>

    <div class="w-full max-w-md bg-white rounded-[2.5rem] shadow-2xl p-8 border border-slate-100 text-center">
        <h1 class="text-xs font-black tracking-[0.3em] text-slate-400 mb-8 uppercase">–ö—Ä—É–∑–æ –ê–ª–∞—Ä–º / STEM –ë–∞–ª–∞–Ω—Å</h1>
        
        <div class="flex justify-between mb-8 px-4">
            <div class="text-center">
                <span class="block text-[10px] uppercase tracking-widest text-slate-400">–ö–æ—Ä—Ç–∏–∑–æ–ª</span>
                <span id="cortisol-val" class="text-2xl font-bold text-red-500">0</span>
            </div>
            <div class="text-center">
                <span class="block text-[10px] uppercase tracking-widest text-slate-400">–ï–Ω–¥–æ—Ä—Ñ–∏–Ω–∏</span>
                <span id="endorphin-val" class="text-2xl font-bold text-blue-500">0</span>
            </div>
        </div>

        <div class="relative flex items-center justify-center mb-10">
            <svg width="220" height="220">
                <circle class="text-slate-100" stroke-width="10" stroke="currentColor" fill="transparent" r="100" cx="110" cy="110"/>
                <circle id="progress" class="text-green-500 progress-ring" stroke-width="10" stroke-dasharray="628.3" stroke-dashoffset="628.3" stroke-linecap="round" stroke="currentColor" fill="transparent" r="100" cx="110" cy="110"/>
            </svg>
            <div id="timer-display" class="absolute text-5xl font-mono font-black text-slate-800">50:00</div>
        </div>

        <button id="main-btn" onclick="startTimer()" class="w-full bg-slate-900 text-white py-5 rounded-2xl font-bold hover:bg-slate-800 transition-all shadow-xl active:scale-95">–°–¢–ê–†–¢ –°–ï–°–ò–Ø</button>
    </div>

    <div id="modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden flex items-center justify-center p-6 z-50">
        <div class="bg-white rounded-[2rem] p-8 max-w-sm w-full shadow-2xl">
            <div id="modal-content"></div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω–∏ –æ—Ç –°–µ–∫—Ü–∏—è I, II, III –∏ IV
        const mottos = [
            "–†–µ–∂–∏–º—ä—Ç –µ –º–æ—è—Ç–∞ –∫—Ä–µ–ø–æ—Å—Ç —Å—Ä–µ—â—É –ª—É–¥–æ—Å—Ç—Ç–∞.",
            "–ü–µ—Ç–∫–∞–Ω –Ω–µ –µ –ø—Ä–æ—Å—Ç–æ —Å–ª—É–≥–∞, —Ç–æ–π –µ –º–æ–µ—Ç–æ —Å–æ—Ü–∏–∞–ª–Ω–æ –æ–≥–ª–µ–¥–∞–ª–æ.",
            "–û—Ç—á–∞—è–Ω–∏–µ—Ç–æ —Å–µ –ª–µ–∫—É–≤–∞ —Å —Ç—Ä—É–¥ –∏ –±—Ä–æ–µ–Ω–∏ —Å—Ç—ä–ø–∫–∏.",
            "–ú–æ—è—Ç –æ—Å—Ç—Ä–æ–≤, –º–æ–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞, –º–æ—è—Ç –¥–∏–≥–∏—Ç–∞–ª–µ–Ω –±–∞–ª–∞–Ω—Å.",
            "–¶–∏–≤–∏–ª–∏–∑–∞—Ü–∏—è—Ç–∞ –µ –≤—ä—Ç—Ä–µ –≤ –º–µ–Ω, –Ω–µ –≤ –µ–∫—Ä–∞–Ω–∞."
        ];
        const missions = ["20 –∫–ª—è–∫–∞–Ω–∏—è", "1 –º–∏–Ω—É—Ç–∞ –ø–ª–∞–Ω–∫", "15 –ª–∏—Ü–µ–≤–∏ –æ–ø–æ—Ä–∏", "30 —Å–µ–∫—É–Ω–¥–∏ –≤–∏—Å–æ–∫ —Ö–æ–¥"];
        const ethicalQuestions = ["–ß—É–≤—Å—Ç–≤–∞—à –ª–∏ —Å–µ –∏–∑–æ–ª–∏—Ä–∞–Ω –±–µ–∑ –µ–∫—Ä–∞–Ω–∞?", "–ü—Ä–µ–Ω–µ–±—Ä–µ–≥–≤–∞—à –ª–∏ —Ö–∏–≥–∏–µ–Ω–∞—Ç–∞ —Å–∏ –∑–∞—Ä–∞–¥–∏ –∏–≥—Ä–∏?", "–õ—ä–∂–µ—à –ª–∏ –∑–∞ –≤—Ä–µ–º–µ—Ç–æ, –ø—Ä–µ–∫–∞—Ä–∞–Ω–æ –æ–Ω–ª–∞–π–Ω?"];
        
        let cortisol = 0, endorphins = 0, time = 3000, timerIdx = null;

        // –†–æ—Ç–∞—Ü–∏—è –Ω–∞ –º–æ—Ç–æ—Ç–∞
        let mottoIdx = 0;
        setInterval(() => {
            mottoIdx = (mottoIdx + 1) % mottos.length;
            document.getElementById('motto-box').innerText = mottos[mottoIdx];
        }, 5000);

        function updateUI() {
            const m = Math.floor(time / 60), s = time % 60;
            document.getElementById('timer-display').innerText = `${m}:${s < 10 ? '0' : ''}${s}`;
            const offset = 628.3 - ( (3000 - time) / 3000) * 628.3;
            document.getElementById('progress').style.strokeDashoffset = offset;
            document.getElementById('cortisol-val').innerText = cortisol;
            document.getElementById('endorphin-val').innerText = endorphins;
        }

        function startTimer() {
            if(timerIdx) return;
            document.getElementById('main-btn').disabled = true;
            timerIdx = setInterval(() => {
                if(time > 0) {
                    time--;
                    if((3000 - time) % 300 === 0) cortisol += 5; // –°–µ–∫—Ü–∏—è II: +5 –Ω–∞ –≤—Å–µ–∫–∏ 5 –º–∏–Ω
                    updateUI();
                } else {
                    clearInterval(timerIdx);
                    showMission();
                }
            }, 1000);
        }

        function showMission() {
            const mission = missions[Math.floor(Math.random()*missions.length)];
            const modal = document.getElementById('modal');
            modal.classList.remove('hidden');
            document.getElementById('modal-content').innerHTML = `
                <h2 class="text-xl font-bold mb-4">üö® –í–†–ï–ú–ï–¢–û –ò–ó–¢–ï–ß–ï!</h2>
                <p class="mb-6 text-slate-600">–ó–∞ –¥–∞ –æ—Ç–∫–ª—é—á–∏—à —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ—Ç–æ, –∏–∑–ø—ä–ª–Ω–∏ –§–í–° –ú–∏—Å–∏—è:<br><strong>${mission}</strong></p>
                <div class="flex flex-col gap-3">
                    <button onclick="completeMission()" class="bg-green-500 text-white py-3 rounded-xl font-bold">–ò–ó–ü–™–õ–ù–ï–ù–û</button>
                    <button onclick="triggerEthics()" class="text-slate-400 text-sm py-2">–û—Ç–∫–∞–∑–≤–∞–º –º–∏—Å–∏—è—Ç–∞</button>
                </div>
            `;
        }

        function completeMission() {
            cortisol -= 15; // –°–µ–∫—Ü–∏—è II: –ö–æ—Ä–µ–∫—Ü–∏—è -15
            endorphins += 20; // –°–µ–∫—Ü–∏—è II: –ö–æ—Ä–µ–∫—Ü–∏—è +20
            resetApp();
        }

        function triggerEthics() {
            let ethicsContent = `<h2 class="text-xl font-bold mb-4">–ï—Ç–∏—á–µ–Ω —Ñ–∏–ª—Ç—ä—Ä</h2><div class="text-left space-y-4">`;
            ethicalQuestions.forEach((q, i) => {
                ethicsContent += `<label class="flex items-center gap-3 text-sm"><input type="checkbox" class="ethics-check"> ${q}</label>`;
            });
            ethicsContent += `</div><button onclick="checkEthics()" class="w-full bg-slate-900 text-white py-3 rounded-xl mt-6">–ü—Ä–æ–≤–µ—Ä–∏ —Ä–∏—Å–∫</button>`;
            document.getElementById('modal-content').innerHTML = ethicsContent;
        }

        function checkEthics() {
            const yesCount = document.querySelectorAll('.ethics-check:checked').length;
            if(yesCount >= 2) {
                document.getElementById('modal-content').innerHTML = `
                    <h2 class="text-xl font-bold text-red-600 mb-4">–í–ò–°–û–ö –†–ò–°–ö!</h2>
                    <p class="text-sm mb-6">–¢–≤–æ–∏—Ç–µ –æ—Ç–≥–æ–≤–æ—Ä–∏ –ø–æ–∫–∞–∑–≤–∞—Ç –Ω—É–∂–¥–∞ –æ—Ç –ø–æ–¥–∫—Ä–µ–ø–∞.</p>
                    <div class="bg-slate-100 p-4 rounded-xl text-left text-xs space-y-2">
                        <p>üìû –ù–∞—Ü–∏–æ–Ω–∞–ª–Ω–∞ –ª–∏–Ω–∏—è –∑–∞ –¥–µ—Ü–∞: 116 111</p>
                        <p>üåê safenet.bg (–¶–µ–Ω—Ç—ä—Ä –∑–∞ –±–µ–∑–æ–ø–∞—Å–µ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç)</p>
                    </div>
                    <button onclick="resetApp()" class="w-full mt-6 py-2 text-slate-500">–ó–∞—Ç–≤–æ—Ä–∏</button>
                `;
            } else {
                resetApp();
            }
        }

        function resetApp() {
            time = 3000;
            clearInterval(timerIdx);
            timerIdx = null;
            document.getElementById('main-btn').disabled = false;
            document.getElementById('modal').classList.add('hidden');
            updateUI();
        }

        updateUI();
    </script>
</body>
</html>
