<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Крузо Аларм 2029</title>
    <link rel="manifest" href="manifest.webmanifest">
    <style>
        body { 
            background: #121212; 
            color: white; 
            font-family: sans-serif; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            height: 100vh; 
            margin: 0; 
        }
        #timer { 
            font-size: 90px; 
            font-weight: bold; 
            color: #22c55e; 
            margin-bottom: 30px; 
        }
        .btn-group { display: flex; gap: 20px; }
        button { 
            padding: 20px 40px; 
            font-size: 20px; 
            font-weight: bold; 
            border-radius: 15px; 
            border: none; 
            cursor: pointer; 
        }
        #startBtn { background: #22c55e; color: white; }
        #resetBtn { background: #444; color: white; }
        .quote { font-style: italic; color: #888; margin-top: 40px; }
    </style>
</head>
<body>

    <div id="timer">50:00</div>

    <div class="btn-group">
        <button id="startBtn" onclick="toggle()">СТАРТ</button>
        <button id="resetBtn" onclick="reset()">НУЛИРАНЕ</button>
    </div>

    <div class="quote">"Всяка почивка е стъпка към успеха."</div>

    <script>
        // Регистрация на Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }

        let time = 3000; // 50 минути в секунди
        let running = false;
        let timerId = null;

        function updateDisplay() {
            let mins = Math.floor(time / 60);
            let secs = time % 60;
            document.getElementById('timer').innerText = 
                `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        function toggle() {
            const btn = document.getElementById('startBtn');
            if (!running) {
                // СТАРТИРАНЕ
                running = true;
                btn.innerText = "ПАУЗА";
                btn.style.background = "#ef4444";
                timerId = setInterval(() => {
                    if (time > 0) {
                        time--;
                        updateDisplay();
                    } else {
                        clearInterval(timerId);
                        alert("Времето изтече!");
                    }
                }, 1000);
            } else {
                // ПАУЗА
                running = false;
                btn.innerText = "СТАРТ";
                btn.style.background = "#22c55e";
                clearInterval(timerId);
            }
        }

        function reset() {
            clearInterval(timerId);
            running = false;
            time = 3000;
            updateDisplay();
            const btn = document.getElementById('startBtn');
            btn.innerText = "СТАРТ";
            btn.style.background = "#22c55e";
        }

        updateDisplay();
    </script>
</body>
</html>
